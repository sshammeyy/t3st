<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mango & Mocha Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    canvas {
      border: 1px solid black;
      display: none;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>🐾 Mango & Mocha Game</h1>
  <img src="images/mango-mocha.jpg" alt="Mango and Mocha" width="400">

  <div class="game-desc">
    <p>
      Welcome to the <strong>Mango & Mocha Game</strong>! 🎮  
      Inspired by the classic Google Chrome Dino game, but with a fun twist — you get to play as either Mango 🐕 (the corgi mix) or Mocha 🐕 (the chocolate lab).  
    </p>
    <p>
      Jump over obstacles and test your reflexes.  
      Can you beat your high score with your favorite pup? 🦴✨
    </p>
  </div>

  <div id="characterSelect" style="margin: 30px;">
    <h2>Choose Your Pup 🐶</h2>
    <button onclick="startGame('mango')">Play as Mango 🟠</button>
    <button onclick="startGame('mocha')">Play as Mocha 🍫</button>
  </div>

  <canvas id="gameCanvas" width="800" height="300"></canvas>

  <!-- Game Script -->
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let dog, dogImg, obstacles, score, gameOver, obstacleInterval;

    const obstacleImg = new Image();
    obstacleImg.src = "images/bone.png";

    function resetGame(choice) {
      dog = { x: 50, y: 220, width: 50, height: 50, dy: 0, gravity: 1.2, jumpPower: -18, grounded: true };
      obstacles = [];
      score = 0;
      gameOver = false;
      dogImg = new Image();
      dogImg.src = choice === "mango" ? "images/mango.jpg" : "images/mocha.jpg";
    }

    function startGame(choice) {
      document.getElementById("characterSelect").style.display = "none";
      canvas.style.display = "block";
      resetGame(choice);

      if (obstacleInterval) clearInterval(obstacleInterval);
      obstacleInterval = setInterval(() => {
        if (!gameOver) {
          obstacles.push({ x: canvas.width, y: 230, width: 40, height: 40 });
        }
      }, 1800);

      requestAnimationFrame(gameLoop);
    }

    function jump() {
      if (dog && dog.grounded && !gameOver) {
        dog.dy = dog.jumpPower;
        dog.grounded = false;
      }
    }

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") jump();
      if (e.code === "KeyR" && gameOver) restartGame();
    });
    canvas.addEventListener("click", () => jump());
    canvas.addEventListener("touchstart", () => jump());

    function restartGame() {
      document.getElementById("characterSelect").style.display = "block";
      canvas.style.display = "none";
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (gameOver) {
        ctx.fillStyle = "red";
        ctx.font = "30px Arial";
        ctx.textAlign = "center";
        ctx.fillText("Game Over!", canvas.width / 2, 120);
        ctx.fillStyle = "black";
        ctx.font = "20px Arial";
        ctx.fillText("Final Score: " + score, canvas.width / 2, 160);
        ctx.fillText("Press R to Restart", canvas.width / 2, 200);
        return;
      }

      ctx.fillStyle = "#6c4c3f"; // ground
      ctx.fillRect(0, 270, canvas.width, 30);

      // Dog physics
      dog.y += dog.dy;
      if (dog.y + dog.height >= 270) {
        dog.y = 220;
        dog.dy = 0;
        dog.grounded = true;
      } else {
        dog.dy += dog.gravity;
      }

      ctx.drawImage(dogImg, dog.x, dog.y, dog.width, dog.height);

      for (let i = 0; i < obstacles.length; i++) {
        let obs = obstacles[i];
        obs.x -= 6;
        ctx.drawImage(obstacleImg, obs.x, obs.y, obs.width, obs.height);

        if (
          dog.x < obs.x + obs.width &&
          dog.x + dog.width > obs.x &&
          dog.y < obs.y + obs.height &&
          dog.height + dog.y > obs.y
        ) {
          gameOver = true;
          clearInterval(obstacleInterval);
        }
      }

      obstacles = obstacles.filter(obs => obs.x > -obs.width);

      score++;
      ctx.fillStyle = "black";
      ctx.font = "20px Arial";
      ctx.textAlign = "left";
      ctx.fillText("Score: " + score, 20, 30);

      requestAnimationFrame(gameLoop);
    }
  </script>
</body>
</html>
